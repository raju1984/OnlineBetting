@model QuickBetCore.Models.BillingShippingAddressViewModel
@{
    ViewBag.Title = "ShopAgentAddress";
    Layout = "~/Areas/Agent/Views/Shared/_Layout.cshtml";
}



<div class="page-content">
    <div class="page-bar">
        <div class="page-title-breadcrumb">
            <div class="pull-left">
                <div class="page-title">Agent Shop Address </div>
            </div>
            <ol class="breadcrumb page-breadcrumb pull-right">
                <li>
                    <i class="fa fa-home"></i>&nbsp;<a class="parent-item" href="@Url.Action("Index", "Dashboard",new { area="Agent"})">Home</a>&nbsp;<i class="fa fa-angle-right"></i>
                </li>

            </ol>
        </div>
    </div>
    <div class="card">
        <div class="card-header">
            @if (Model.Id > 0)
            {
                <h4 class="card-title" style="width:100%;">Update Address</h4>
            }
            else
            {
                <h4 class="card-title" style="width:100%;">Enter Address</h4>
            }
        </div>
        <div class="card-body">
            @using (Html.BeginForm("PostBillingaddress", "AgentProfileSetting", FormMethod.Post, new { @class = "log-form", area = "Agent", enctype = "multipart/form-data" }))
            {

            <input type="hidden" name="Id" id="Id" value="@Model.Id"  />
                <div class="form-group row">
                    <label class="col-form-label col-md-2">Shop name * </label>
                    <div class="col-md-10">
                        <input type="text" id="fullname" value="@Model.fullname" required name="fullname" class="form-control" placeholder="Enter Here">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-form-label col-md-2">Country / Region *</label>
                    <div class="col-md-10">
                        <select class="form-control" onchange="OnCountryChange()" required id="CountryCode" name="CountryCode">
                            @if (Model != null && Model.Countrys != null && Model.Countrys.Count() > 0)
                            {
                                foreach (var item in Model.Countrys)
                                {
                                    if (!string.IsNullOrEmpty(Model.CountryCode))
                                    {
                                        if (item.Code == Model.CountryCode)
                                        {
                                            <option value="@item.Code" selected>@item.Name</option>
                                        }
                                        else
                                        {
                                            <option value="@item.Code">@item.Name</option>
                                        }
                                    }
                                    else
                                    {
                                        if (item.Code == "NG")
                                        {
                                            <option value="@item.Code" selected>@item.Name</option>
                                        }
                                        else
                                        {
                                            <option value="@item.Code">@item.Name</option>
                                        }
                                    }
                                }
                            }
                        </select>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-form-label col-md-2">Street* </label>
                    <div class="col-md-10">
                        <input type="text" value="@Model.Street" id="Street" name="Street" required class="form-control" placeholder="Enter Here">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-form-label col-md-2">Street NO* </label>
                    <div class="col-md-10">
                        <input type="text" value="@Model.StreetNO" id="StreetNo" name="StreetNo" required class="form-control" placeholder="Enter Here">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-form-label col-md-2">Town / City * </label>
                    <div class="col-md-10">
                        <input type="text" value="@Model.City" id="City" name="City" required class="form-control" placeholder="Enter Here">
                    </div>
                </div>

                <div class="form-group row">
                    <label class="col-form-label col-md-2">Shop Phone No * </label>
                    <div class="col-md-10">
                        <input type="number" value="@Model.PhoneNumber" id="PhoneNumber" name="PhoneNumber" minlength="6" required class="form-control" placeholder="Enter Here">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-form-label col-md-2">Pincode * </label>
                    <div class="col-md-10">
                        <input type="number" value="@Model.ZipCode" id="ZipCode" name="ZipCode" minlength="4" required class="form-control" placeholder="Enter Here">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-form-label col-md-2">Shop Email Address * </label>
                    <div class="col-md-10">
                        <input type="email" value="@Model.BillingEmail" id="BillingEmail" name="BillingEmail" required class="form-control" placeholder="Enter Here">
                    </div>
                </div>
                <div class="text-left">
                    <button type="submit" onclick="return validate()" class="btn btn-primary">Save Address</button>
                </div>
            }

        </div>
    </div>
</div>

<script>

    $(document).ready(function () {
        $("#ShopAgentAddress").addClass("active");
    })

    function validate() {
        debugger;
        var CountryCode = $('#CountryCode').val();
        if (CountryCode == 0) {
            alertify.alert("please select country!");
            return false;
        }
        else {
            return true;
        }
    }

    function OnCountryChange() {
        var countryId = $("#countryId").val()
        debugger;
        if (countryId > 0) {
            Loader(true);
            $.ajax({
                type: "POST",
                url: "/User/Addresses/GetStateByCountry",
                data: '{countryId: "' + countryId + '"}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    debugger;
                    $("#stateId").empty();
                    if (result && result.Data) {
                        $.each(result.Data, function () {
                            $("#stateId").append($("<option/>").val(this.Id).text(this.Name));
                        });
                    }
                    Loader(false);
                },
                error: function (err) {
                    Loader(false);
                }
            });
        }
    }
</script>

@{
    if (ViewData["error"] != null)
    {
        <script type="text/javascript">
            $(document).ready(function () {
                alertify.info("@ViewData["error"]");
            })
        </script>
    }
}
@if (ViewBag.response != null)
{
    var response = (string)ViewBag.response;
    <script>
            alertify.success("@response");
    </script>
}